"use strict";(self["webpackChunkquick_csv_fix"]=self["webpackChunkquick_csv_fix"]||[]).push([[907],{4907:(e,t,s)=>{s.r(t),s.d(t,{default:()=>W});var l=s(3673);function o(e,t,s,o,i,n){const a=(0,l.up)("Table"),r=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(r,{class:"flex flex-center q-pa-md"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(a)])])),_:1})}s(7280),s(5363);const i={class:"q-pa-md "},n={class:"flex justify-between"},a={key:0,class:"text-primary"},r=(0,l.Uk)(" change view: ");function c(e,t,s,o,c,u){const p=(0,l.up)("Uploader"),d=(0,l.up)("q-btn"),m=(0,l.up)("q-select"),v=(0,l.up)("q-icon"),f=(0,l.up)("q-input"),b=(0,l.up)("q-badge"),h=(0,l.up)("q-td"),g=(0,l.up)("q-table");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",n,[(0,l.Wm)(p),o.store.state.collumnsCsv?((0,l.wg)(),(0,l.iD)("div",a,[r,(0,l.Wm)(d,{color:"primary",flat:"",label:this.store.state.grid?"grid":"table","no-caps":"",onClick:t[0]||(t[0]=e=>this.store.state.grid=!this.store.state.grid)},null,8,["label"])])):(0,l.kq)("",!0),o.store.state.collumnsCsv?((0,l.wg)(),(0,l.j4)(d,{key:1,color:"primary",flat:"","icon-right":"archive",class:"absolute-top-right",label:"Export","no-caps":"",onClick:u.exportTable},null,8,["onClick"])):(0,l.kq)("",!0)]),o.store.state.collumnsCsv?((0,l.wg)(),(0,l.j4)(g,{key:0,ref:"csvtable",grid:this.store.state.grid,"card-class":this.store.state.grid?"bg-primary text-white":"",style:{"max-width":"1000px"},title:o.store.state.fileName.replace(".csv",""),dense:"",columns:o.store.state.collumnsCsv,rows:o.store.state.rowsCsv,"row-key":o.store.state.collumnsCsv[0].name,filter:o.filter,pagination:o.store.state.initialPagination,"onUpdate:pagination":t[3]||(t[3]=e=>o.store.state.initialPagination=e),"visible-columns":o.store.state.visibleColumns},{"top-right":(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:o.store.state.visibleColumns,"onUpdate:modelValue":t[1]||(t[1]=e=>o.store.state.visibleColumns=e),multiple:"",outlined:"",dense:"","options-dense":"","display-value":"Visible "+o.$q.lang.table.columns,"emit-value":"","map-options":"",options:o.store.state.collumnsCsv,"option-value":"name","options-cover":"",style:{"min-width":"150px"},class:"q-pr-xl"},null,8,["modelValue","display-value","options"]),(0,l.Wm)(f,{borderless:"",dense:"",debounce:"300",modelValue:o.filter,"onUpdate:modelValue":t[2]||(t[2]=e=>o.filter=e),placeholder:"Search"},{append:(0,l.w5)((()=>[(0,l.Wm)(v,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell":(0,l.w5)((e=>[(0,l.Wm)(h,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{color:"blue",label:e.value},null,8,["label"])])),_:2},1032,["props"])])),_:1},8,["grid","card-class","title","columns","rows","row-key","filter","pagination","visible-columns"])):(0,l.kq)("",!0)])}s(2841);var u=s(8825),p=s(2323);function d(e,t,s,o,i,n){const a=(0,l.up)("q-icon"),r=(0,l.up)("q-file");return(0,l.wg)(),(0,l.j4)(r,{accept:"csv","label-color":(o.filesCsv,""),"icon-color":o.filesCsv?"":"white","bg-color":(o.filesCsv,""),rounded:!o.filesCsv,outlined:!o.filesCsv,style:(0,p.j5)(o.filesCsv?"max-width:300px":"max-width:400px"),modelValue:o.filesCsv,"onUpdate:modelValue":t[0]||(t[0]=e=>o.filesCsv=e),dense:!!o.filesCsv,clearable:"",icon:"home",label:"  Upload csv",multiple:"",filter:o.checkFileType,onRejected:o.onRejected},(0,l.Nv)({_:2},[o.filesCsv?void 0:{name:"prepend",fn:(0,l.w5)((()=>[(0,l.Wm)(a,{name:"upload"})]))}]),1032,["label-color","icon-color","bg-color","rounded","outlined","style","modelValue","dense","filter","onRejected"])}s(71);var m=s(1959);const v={setup(){const e=(0,u.Z)(),t=(0,l.f3)("csvStore");return{store:t,filesMaxSize:(0,m.iH)(null),filesCsv:(0,m.iH)(null),checkFileSize(e){return e.filter((e=>e.size<2048))},checkFileType(e){return e.filter((e=>"text/csv"===e.type))},onRejected(t){e.notify({type:"negative",message:`${t.length} file(s) did not pass validation constraints`})}}},watch:{filesCsv(e){e&&e[0].text().then((t=>{this.store.state.fileName=e[0].name;const s=t.split("\n"),l=s[0].split(","),o=[];for(var i=0;i<l.length;i++)l[i]&&o.push({name:l[i],label:l[i],field:l[i],sortable:!0});this.store.state.collumnsCsv=o,this.store.state.visibleColumns=[...o],this.store.state.visibleColumns=this.store.state.visibleColumns.map((e=>e.name));const n=[];for(i=1;i<s.length;i++){let e=new Object;for(var a=0;a<s[i].length;a++){let t=l[a],o=s[i].split(",")[a];isNaN(o)||(o=Number(o)),t&&(e[t]=o)}0===Object.keys(e).length||n.push(e)}this.store.state.rowsCsv=n}))}}};var f=s(4974),b=s(4554),h=s(7518),g=s.n(h);v.render=d;const C=v;g()(v,"components",{QFile:f.Z,QIcon:b.Z});const w={components:{Uploader:C},setup(){const e=(0,u.Z)();return{store:(0,l.f3)("csvStore"),filter:(0,m.iH)(""),$q:e}},methods:{exportTable(){console.log(this.$refs.csvtable)}}};var y=s(4607),k=s(6593),x=s(4788),q=s(4689),Z=s(3884),j=s(9721);w.render=c;const _=w;g()(w,"components",{QBtn:y.Z,QTable:k.Z,QSelect:x.Z,QInput:q.Z,QIcon:b.Z,QTd:Z.Z,QBadge:j.Z});const Q=(0,l.aZ)({name:"PageIndex",components:{Table:_},setup(){const e=(0,l.f3)("csvStore");return{store:e}}});var V=s(4379);Q.render=o;const W=Q;g()(Q,"components",{QPage:V.Z})}}]);